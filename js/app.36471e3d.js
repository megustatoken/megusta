(function(){"use strict";var e={7175:function(e,t,n){n.r(t)},7729:function(e,t,n){var a=n(9242),r=n(3396);function s(e,t,n,a,s,i){const o=(0,r.up)("Countdown"),l=(0,r.up)("HelloWorld");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(o,{deadline:"2024-3-5 00:00:00",mainColor:"#fff",mainFlipBackgroundColor:"#4A2359",secondFlipBackgroundColor:"#4A2359",labelColor:"#4A2359"}),(0,r.Wm)(l,{msg:"Welcome to MeGusta"})],64)}var i=n(7139);const o=e=>((0,r.dD)("data-v-17fcd530"),e=e(),(0,r.Cn)(),e),l={class:"hello presaleBox"},u=o((()=>(0,r._)("h4",null,[(0,r._)("span",null,"Private Sale")],-1))),c=o((()=>(0,r._)("div",{class:"error_msg price_box"},[(0,r._)("div",null,"Current price: 0,000000000032 BNB"),(0,r._)("div",null,"1 BNB = 31,250,000,000 MeGusta Tokens")],-1))),d={class:"legend d-flex"},p={class:"d-flex gap-2"},f=o((()=>(0,r._)("b",null,"Min Buy Amount:",-1))),y={class:"d-flex gap-2"},h=o((()=>(0,r._)("b",null,"Max Buy Amount:",-1))),m={class:"buy_token_box d-flex"},b=o((()=>(0,r._)("label",{for:"tokenAmount"},"Buy MeGusta:",-1))),w={class:"buy_token_box d-flex"},v=o((()=>(0,r._)("label",{for:"referral"},"Referral:",-1))),g={class:"error_msg mt-0"},T={key:0},k=["disabled"],C={key:1,class:"connected_account"},_={key:0,class:"generate_referral"},R=o((()=>(0,r._)("h2",{class:"ref_heading"},"Generate Referral Code",-1))),A=o((()=>(0,r._)("div",{class:"info_legend_ref"},"Generate your own referral code and share it with your friends!",-1))),B={key:0,class:"error_msg"},S=o((()=>(0,r._)("span",null,"Referral code already exists.",-1))),M=[S],x=["disabled"],P={key:1,class:"ref_code"},O=o((()=>(0,r._)("h2",null,"Saving...",-1))),I=[O],W={key:2,class:"ref_code"},E={key:2,class:"error_msg"},L={key:3,class:"account_connected"},U=o((()=>(0,r._)("b",null,"Connected Account:",-1)));function D(e,t,n,s,o,S){return(0,r.wg)(),(0,r.iD)("div",l,[u,c,(0,r._)("div",d,[(0,r._)("p",p,[f,(0,r.Uk)(" "+(0,i.zw)(o.minContribLimit)+" BNB ",1)]),(0,r._)("p",y,[h,(0,r.Uk)(" "+(0,i.zw)(o.maxContribLimit)+" BNB ",1)])]),o.connected?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>S.connectWallet&&S.connectWallet(...e)),class:"connect_wallet"},"Connect Wallet")),(0,r._)("div",m,[b,(0,r.wy)((0,r._)("input",{type:"number",id:"tokenAmount","onUpdate:modelValue":t[1]||(t[1]=e=>o.tokenAmount=e),placeholder:"Enter BNB Amount"},null,512),[[a.nr,o.tokenAmount]])]),(0,r._)("div",w,[v,(0,r.wy)((0,r._)("input",{class:(0,i.C_)(!o.referralAddress&&o.referralCode?"input-error":"input-success"),type:"text",id:"referral","onUpdate:modelValue":t[2]||(t[2]=e=>S._referralCode=e),placeholder:"Referral Code"},null,2),[[a.nr,S._referralCode]])]),(0,r._)("div",g,[o.disableBuy||o.referralAddress||!o.referralCode?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",T,"Referral code does not exist."))]),(0,r._)("button",{disabled:o.disableBuy,onClick:t[3]||(t[3]=(...e)=>S.buyTokens&&S.buyTokens(...e))},"Buy Tokens",8,k),o.connected?((0,r.wg)(),(0,r.iD)("div",C,[o.connected&&!o.isAccountReferral?((0,r.wg)(),(0,r.iD)("div",_,[R,A,(0,r.wy)((0,r._)("input",{type:"text",class:"ml-0 referral_input","onUpdate:modelValue":t[4]||(t[4]=e=>S._saveReferralCode=e),placeholder:"Enter referral code"},null,512),[[a.nr,S._saveReferralCode]]),!o.disableSaveRef&&o.referralInUse?((0,r.wg)(),(0,r.iD)("div",B,M)):(0,r.kq)("",!0),(0,r._)("button",{disabled:o.disableSaveRef||o.referralInUse,onClick:t[5]||(t[5]=(...e)=>S.createReferralCode&&S.createReferralCode(...e))},"Save Referral",8,x)])):(0,r.kq)("",!0),o.savingReferral?((0,r.wg)(),(0,r.iD)("div",P,I)):(0,r.kq)("",!0),o.refId&&o.isAccountReferral?((0,r.wg)(),(0,r.iD)("div",W,[(0,r._)("h2",null,"Your referral code: "+(0,i.zw)(o.refId),1)])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),o.message.msg?((0,r.wg)(),(0,r.iD)("div",E,[(0,r._)("span",null,(0,i.zw)(o.message.msg),1)])):(0,r.kq)("",!0),o.connected?((0,r.wg)(),(0,r.iD)("div",L,[(0,r._)("p",null,[U,(0,r.Uk)(" "+(0,i.zw)(o.account),1)])])):(0,r.kq)("",!0)])}var q=n(7158),z=n(6265),N=n.n(z);const j=new q.ZPm("https://bsc-dataseed.binance.org/");var Z={data(){return{collectedTokens:-1,collectedTokensTarget:5e3,refreshInterval:null,isLoading:!1,referralCode:"",referralCodeSet:"",disableBuy:!1,disableSaveRef:!1,savingReferral:!1,referralInUse:!1,web3:null,referralAddress:null,contract:null,contractAddress:"0x1d48a15E7e55f81Ce99c42c614987b958603b8f5",minContribLimit:null,maxContribLimit:null,referralPoolSize:null,balance:null,connected:!1,account:null,isAccountReferral:!1,refId:null,httpCancelToken:N().CancelToken,httpCancelTokenSource:null,tokenAmount:null,message:{err:!1,msg:null}}},created(){this.initWeb3(),this.updateTargetProgress(),this.refreshInterval=setInterval((async()=>{await this.updateTargetProgress()}),6e4)},beforeUnmount(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null)},computed:{collectedTokensPercent:{get(){return-1===this.collectedTokens?"calculating ...":0!==this.collectedTokensTarget?(100*this.collectedTokens/this.collectedTokensTarget).toFixed(6)+"%":"0%"}},_saveReferralCode:{get(){return this.referralCodeSet},set(e){if(this.timeout){clearTimeout(this.timeout);try{this.httpCancelTokenSource.cancel("Operation canceled")}catch(t){}finally{this.httpCancelTokenSource=null}}this.referralInUse=!1,this.referralCodeSet=e,this.referralCodeSet&&""!==this.referralCodeSet.trim()&&(this.disableSaveRef=!0,this.httpCancelTokenSource=this.httpCancelToken.source(),this.timeout=setTimeout((async()=>{this.referralInUse=await this.getAddressByCode(this.referralCodeSet,this.httpCancelTokenSource.token),this.disableSaveRef=!1}),300))}},_referralCode:{get(){return this.referralCode},set(e){if(this.timeout){clearTimeout(this.timeout);try{this.httpCancelTokenSource.cancel("Operation canceled")}catch(t){}finally{this.httpCancelTokenSource=null}}this.referralCode=e,this.referralCode&&""!==this.referralCode.trim()&&(this.disableBuy=!0,this.httpCancelTokenSource=this.httpCancelToken.source(),this.timeout=setTimeout((async()=>{this.referralAddress=await this.getAddressByCode(this.referralCode,this.httpCancelTokenSource.token),this.disableBuy=!1}),300))}}},methods:{async initWeb3(){let e,t;if("undefined"!==typeof window.ethereum)if(window.ethereum.providers?.length>1){let n=window.ethereum.providers.findIndex((e=>e.isCoinbaseWallet));n<0?n=0:0===n?n=1:n-=1,e=new q.ZPm(window.ethereum.providers[n]),t=window.ethereum.providers[n]}else e=new q.ZPm(window.ethereum),t=window.ethereum;else"undefined"!==typeof t?e=new q.ZPm(t):"undefined"!==typeof j&&(e=new q.ZPm(j.givenProvider));this.web3=e,this.initContract()},initContract(){const e=n(6208);this.contract=new this.web3.eth.Contract(e,this.contractAddress),this.fetchContractData()},setError(e){this.message={err:!0,msg:e}},clearError(){this.message={err:!1,msg:null}},setMessage(e){this.message={err:!1,msg:e}},async getAddressByCode(e,t){return N().get("/_functions/referral_by_code",{cancelToken:t,params:{code:e}}).then((e=>e.data)).then((e=>e&&e.referral||null)).catch((()=>null))},async buyTokens(){if(this.clearError(),this.connected||(await this.connectWallet(),this.connected))try{this.disableBuy=!0;const e=this.web3.utils.toWei(this.tokenAmount,"ether"),t={value:e,from:this.account,gas:5e4,gasLimit:6e5,gasPrice:this.web3.utils.toWei(4,"gwei")};this.referralAddress&&this.referralAddress.trim().length>0?await this.contract.methods.buyTokensReferral(this.referralAddress).send(t).catch((e=>{throw e})):await this.contract.methods.buyTokens().send(t).catch((e=>{throw e})),this.setMessage("Transaction Successful!"),await this.updateTokenAmount(this.tokenAmount)}catch(e){this.setError(e.message)}finally{this.disableBuy=!1}else this.setError("ðŸ˜¥ Sorry. We have no access to the user address. Please try again.")},async updateTokenAmount(e){const t={count:0,target:100},n=await N().post("/_functions/increment",{count:e}).then((e=>e.data||t)).catch((()=>t));this.collectedTokens=n.count},async updateTargetProgress(){const e={count:0,target:100},t=await N().get("/_functions/stats",{referral:this.account,code:this.referralCodeSet}).then((t=>t.data||e)).catch((()=>e));this.collectedTokens=t.count,this.collectedTokensTarget=t.target},async createReferralCode(){try{this.savingReferral=!0,this.disableSaveRef=!0,this.isAccountReferral=!1,this.isLoading=!0,this.clearError();const e=await this.contract.methods.addReferral(this.account).send({from:this.account,gas:5e4,gasLimit:6e5,gasPrice:this.web3.utils.toWei(4,"gwei")}).then((e=>e)).catch((()=>!1));if(!e)return this.setError("Something went wrong."),void(this.isLoading=!1);const t=await N().post("/_functions/referrals",{referral:this.account,code:this.referralCodeSet}).then((()=>!0)).catch((()=>!1));if(!t)return this.setError("Cannot set referral. The code is already used."),void(this.isLoading=!1);this.refId=this.referralCodeSet,this.isAccountReferral=!0,this.isLoading=!1}finally{this.savingReferral=!1,this.disableSaveRef=!1}},async getReferralByRef(){return N().get("/_functions/referral_by_ref",{params:{referral:this.account}}).then((e=>e.data))},async connectWallet(){if(!this.connected)if(window.ethereum)try{const e=await window.ethereum.request({method:"eth_requestAccounts"});e.length>0?(this.account=e[0],this.connected=!0,await this.fetchAccountInfo()):this.setError("ðŸ˜¥ No account found. ")}catch(e){this.setError("ðŸ˜¥ User denied account access. "+e.message)}else this.setError("ðŸ˜¥ You must install Metamask, a virtual Ethereum wallet, in your browser.")},async fetchAccountInfo(){Promise.all([this.contract.methods.isReferral(this.$data.account).call(),this.getReferralByRef()]).then((([e,t])=>{this.isAccountReferral=e,this.refId=t.code??null}))},async fetchContractData(){Promise.all([this.contract.methods.minContribLimit().call(),this.contract.methods.maxContribLimit().call(),this.contract.methods.getReferralPoolSize().call(),this.web3.eth.getBalance(this.contractAddress)]).then((([e,t,n,a])=>{this.$data.minContribLimit=this.web3.utils.fromWei(e,"ether"),this.$data.maxContribLimit=this.web3.utils.fromWei(t,"ether"),this.$data.referralPoolSize=this.web3.utils.fromWei(n,"ether"),this.$data.balance=this.web3.utils.fromWei(a,"ether")}))}}},G=n(89);const $=(0,G.Z)(Z,[["render",D],["__scopeId","data-v-17fcd530"]]);var F=$,H=n(8414),V={name:"App",components:{HelloWorld:F,Countdown:H.Countdown}};const Y=(0,G.Z)(V,[["render",s]]);var J=Y;(0,a.ri)(J).mount("#app"),n(7175)},6208:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referral","type":"address"}],"name":"ReferralAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"recipient","type":"address"},{"indexed":false,"internalType":"uint256","name":"bonus","type":"uint256"}],"name":"ReferralBonus","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referral","type":"address"}],"name":"ReferralRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"buyer","type":"address"},{"indexed":true,"internalType":"address","name":"referral","type":"address"}],"name":"ReferralUsed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokens","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokensBought","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"inputs":[{"internalType":"address","name":"_referralAddress","type":"address"}],"name":"addReferral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"availableTokens","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"buyTokens","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"referral","type":"address"}],"name":"buyTokensReferral","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"buyerPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokens","type":"uint256"}],"name":"calculateBuyerBonusTokens","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokens","type":"uint256"}],"name":"calculateReferralBonusTokens","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"target","type":"address"}],"name":"getAddressBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getReferralPoolSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hardCap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_referralAddress","type":"address"}],"name":"hasReferral","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isReferral","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxContribLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minContribLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"presaleContractBnbBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"referralPercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"referralPoolSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_referralAddress","type":"address"}],"name":"removeReferral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"target","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"setAddressBalance","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"token","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"BNBToSell","type":"uint256"}],"name":"tokenPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"transferTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawBNB","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,r,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],r=e[c][1],s=e[c][2];for(var o=!0,l=0;l<a.length;l++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,r,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,s,i=a[0],o=a[1],l=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)var c=l(n)}for(t&&t(a);u<i.length;u++)s=i[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkweb"]=self["webpackChunkweb"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(7729)}));a=n.O(a)})();
//# sourceMappingURL=app.da751370.js.map
